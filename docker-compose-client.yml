version: "3"

services:

  deitos-client:
    image: deitos-lite-client-image
    container_name: deitos-client
    hostname: client.deitos.network
    ports:
      - "8889:8888"
    volumes:
      - ./deitos-client:/home/jupyter
      - "./config/krb5.conf:/etc/krb5.conf"
      - "/etc/localtime:/etc/localtime:ro"      
    restart: always
    networks:
      deitosnet:
        ipv4_address: 172.28.1.24
    extra_hosts:
      - "metastore.deitos.network:172.28.1.1"      
      - "master.deitos.network:172.28.1.2"
      - "worker1.deitos.network:172.28.1.3"
      - "worker2.deitos.network:172.28.1.4"

networks:
  deitosnet:
    ipam:
      driver: default
      config:
        - subnet: 172.28.0.0/16